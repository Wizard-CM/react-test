import{j as r,r as o,s as O,L as U,p as q,a as G,C as _,f as J}from"./index-yag6wL5M.js";import{m as Y,L as K}from"./data-2_J9rPiU.js";import{u as Q}from"./index.esm-BOc36_KT.js";const y=({children:e})=>r.jsx("h3",{className:"text-xl font-light font-serif",children:e});var W=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],v=e=>{let t=0;for(let a=0;a<e.length;a++){let l=e[a],c=W.indexOf(l);t=t*83+c}return t},M=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},$=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},Z=e=>e<0?-1:1,E=(e,t)=>Z(e)*Math.pow(Math.abs(e),t),A=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},ee=e=>{if(!e||e.length<6)throw new A("The blurhash string must be at least 6 characters");let t=v(e[0]),a=Math.floor(t/9)+1,l=t%9+1;if(e.length!==4+2*l*a)throw new A(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*l*a}`)},te=e=>{let t=e>>16,a=e>>8&255,l=e&255;return[M(t),M(a),M(l)]},re=(e,t)=>{let a=Math.floor(e/361),l=Math.floor(e/19)%19,c=e%19;return[E((a-9)/9,2)*t,E((l-9)/9,2)*t,E((c-9)/9,2)*t]},se=(e,t,a,l)=>{ee(e),l=l|1;let c=v(e[0]),m=Math.floor(c/9)+1,h=c%9+1,f=(v(e[1])+1)/166,u=new Array(h*m);for(let n=0;n<u.length;n++)if(n===0){let d=v(e.substring(2,6));u[n]=te(d)}else{let d=v(e.substring(4+n*2,6+n*2));u[n]=re(d,f*l)}let p=t*4,x=new Uint8ClampedArray(p*a);for(let n=0;n<a;n++)for(let d=0;d<t;d++){let w=0,N=0,S=0;for(let g=0;g<m;g++)for(let s=0;s<h;s++){let i=Math.cos(Math.PI*d*s/t)*Math.cos(Math.PI*n*g/a),b=u[s+g*h];w+=b[0]*i,N+=b[1]*i,S+=b[2]*i}let j=$(w),k=$(N),F=$(S);x[4*d+0+n*p]=j,x[4*d+1+n*p]=k,x[4*d+2+n*p]=F,x[4*d+3+n*p]=255}return x},ae=se,le=Object.defineProperty,ie=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,I=(e,t,a)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,L=(e,t)=>{for(var a in t||(t={}))R.call(t,a)&&I(e,a,t[a]);if(P)for(var a of P(t))X.call(t,a)&&I(e,a,t[a]);return e},z=(e,t)=>ie(e,ne(t)),T=(e,t)=>{var a={};for(var l in e)R.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&P)for(var l of P(e))t.indexOf(l)<0&&X.call(e,l)&&(a[l]=e[l]);return a},V=class extends o.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:t,punch:a,width:l}=this.props;if(this.canvas){let c=ae(e,l,t,a),m=this.canvas.getContext("2d"),h=m.createImageData(l,t);h.data.set(c),m.putImageData(h,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:t,height:a,width:l}=e,c=T(e,["hash","height","width"]);return o.createElement("canvas",z(L({},c),{height:a,width:l,ref:this.handleRef}))}};V.defaultProps={height:128,width:128};var ce={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},H=class extends o.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:t,height:a,width:l,punch:c,resolutionX:m,resolutionY:h,style:f}=e,u=T(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return o.createElement("div",z(L({},u),{style:z(L({display:"inline-block",height:a,width:l},f),{position:"relative"})}),o.createElement(V,{hash:t,height:h,width:m,punch:c,style:ce}))}};H.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const D=({post:e,newdate:t})=>{const[a,l]=o.useState(!1),[c,m]=o.useState("opacity-[0]"),h=O.getFilePreview(e==null?void 0:e.featuredImage);return o.useEffect(()=>{const f=new Image;f.onload=()=>{l(!0),m("opacity-[1]")},f.src=h},[]),r.jsx(U,{to:`/post/${e.$id}`,children:r.jsxs("div",{className:"flex items-center border-b-[1px] border-gray-300 py-1",children:[r.jsxs("div",{className:"left w-full",children:[r.jsxs("div",{className:"flex gap-3 font-mono",children:[r.jsx("p",{className:"text-[0.7rem] capitalize",children:e.userName}),r.jsxs("p",{className:"text-[0.7rem]",children:[Y[t==null?void 0:t.getMonth()]," ",t==null?void 0:t.getDate(),",",t==null?void 0:t.getFullYear()]})]}),r.jsx("h3",{className:"mt-1 font-semibold capitalize",children:e==null?void 0:e.title}),r.jsx("span",{className:"font-[0.6rem] mb-2 text-[0.8rem] text-gray-700",children:q(e.content)}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{className:"my-2 px-2 bg-[#F0F0F0] border-[1px] text-[0.9rem] font-serif rounded-lg capitalize text-blue-600",children:e.category}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(K,{}),r.jsx("p",{className:" px-1  text-[0.7rem]  font-bold",children:e==null?void 0:e.likes})]})]})]}),r.jsx("div",{className:"right",children:r.jsxs("div",{className:"relative w-44 h-28",children:[r.jsx("img",{src:h,className:`absolute top-0 left-0 ${a&&"z-[11]"} w-full h-full shadow-sm object-cover transition-all duration-1000 ease-in-out ${c}`,style:{opacity:{}},alt:"",loading:"lazy"}),r.jsx(H,{hash:e==null?void 0:e.blurHash,width:"100%",height:"100%",resolutionX:32,resolutionY:32,punch:1,className:"absolute top-0 left-0 z-10"})]})})]})})},oe=({children:e})=>r.jsx("button",{className:" text-blue-600 px-2 bg-[#F0F0F0] border-[1px] font-serif rounded-lg capitalize",children:e}),C=["All"],ue=()=>{const[e,t]=o.useState([]),[a,l]=o.useState([]),[c,m]=o.useState(!0),[h,f]=o.useState("All"),[u,p]=o.useState(e),[x,n]=o.useState(!1),{register:d,handleSubmit:w,setValue:N,getValues:S,watch:j,formState:{errors:k}}=Q();Array.prototype.handleSearcFilter=()=>{const s=new RegExp(`^${j("search")}`,"i");return u.filter(i=>s.test(i))};function F(){g(j("search")),n(!1)}function g(s){f(s);const i=e.filter(b=>b.category.toLocaleUpperCase()==s.toLocaleUpperCase());s!="All"?l(i):l(e)}return o.useEffect(()=>{O.getAllPosts().then(s=>{s&&(s.documents.map(i=>{C.find(B=>B.toLocaleUpperCase()==i.category.toLocaleUpperCase())||C.push(i.category)}),t(s.documents),p(C),l(s.documents),m(!1))})},[]),o.useEffect(()=>(document.addEventListener("click",s=>{const i=s.target.parentElement;i.className.includes("search-filter-ul")||i.className.includes("filters")||n(!1)}),()=>{document.removeEventListener("click",()=>{})}),[x]),c?r.jsx(G,{}):r.jsx("div",{className:"w-full",children:r.jsx(_,{children:r.jsxs("div",{className:"parent flex gap-5 flex-col-reverse md:flex-row py-2",children:[r.jsxs("div",{className:"home-left w-full md:w-[20%] relative",children:[r.jsx(y,{children:"Filtering Section"}),r.jsxs("div",{className:"w-full my-4",children:[r.jsx("form",{onSubmit:w(F),children:r.jsx(J,{type:"text",placeholder:"Search Articles...",className:"border-[1px] border-black",onClick:()=>{n(!0)},...d("search")})}),r.jsx("div",{className:`filtered-search-results w-full absolute top-20 left-0 shadow-xl rounded-lg bg-white z-[2] ${x?"block":"hidden"}`,id:"filtered-search-results",children:r.jsx("ul",{className:"search-filter-ul",children:u.handleSearcFilter().map(s=>r.jsx("li",{className:" hover:bg-gray-700 capitalize hover:text-white px-4 py-2",onClick:()=>{N("search",s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()),n(!1),g(j("search"))},children:s},s))})})]})]}),r.jsxs("div",{className:"home-mid w-full md:w-[55%] min-h-96  md:border-r-[2px] md:border-l-[2px] border-gray-100 py-0 px-5 ",children:[r.jsx("div",{className:"w-full border-b-[1px] mb-3 border-gray-900 uppercase",children:r.jsx(y,{children:h})}),a.length>0?a.map(s=>{const i=new Date(s==null?void 0:s.$createdAt);return r.jsx(D,{newdate:i,post:s},s.$id)}):e.map(s=>{const i=new Date(s==null?void 0:s.$createdAt);return r.jsx(D,{newdate:i,post:s},s.$id)}),e.length==0&&r.jsx("h2",{className:"text-3xl w-full font-semibold text-center",children:"No Posts To Show"})]}),r.jsxs("div",{className:"home-right w-full md:w-[20%]  ",children:[r.jsxs("div",{className:"top",children:[r.jsx("div",{className:"my-3",children:r.jsx(y,{children:"Choose Category"})}),r.jsx("div",{className:"flex gap-3 flex-wrap",children:C.map((s,i)=>r.jsx("span",{onClick:()=>{g(s)},children:r.jsx(oe,{children:s})},i))})]}),r.jsxs("div",{className:"hidden md:block bottom",children:[r.jsx("div",{className:"my-3",children:r.jsx(y,{children:"Trending"})}),e.slice(3).map(s=>{const i=new Date(s==null?void 0:s.$createdAt);return r.jsx(U,{to:`/post/${s.$id}`,className:"",children:r.jsxs("div",{className:"flex gap-3 items-center border-b-[1px] border-gray-300 py-3",children:[r.jsx("div",{className:"left",children:r.jsx("img",{src:O.getFilePreview(s==null?void 0:s.featuredImage),className:"w-24 h-16 shadow-sm object-cover",alt:"",loading:"lazy"})}),r.jsxs("div",{className:"right w-full",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("p",{className:"text-[0.7rem] font-mono capitalize",children:s.userName}),r.jsxs("p",{className:"text-[0.7rem]",children:[Y[i==null?void 0:i.getMonth()]," ",i==null?void 0:i.getDate(),",",i==null?void 0:i.getFullYear()]})]}),r.jsx("h3",{className:"mt-2 font-semibold text-[0.8rem] capitalize",children:s==null?void 0:s.title})]})]})},s.$id)})]})]})]})})})};export{ue as default};
